<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Mine Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{margin:0;font-family:sans-serif;background:#0f172a;color:#fff}
.app{max-width:420px;margin:auto;padding:12px}
.mine{width:150px;height:150px;border-radius:50%;background:#22c55e;
display:flex;align-items:center;justify-content:center;
font-size:40px;margin:15px auto;cursor:pointer}
.card{background:#1e293b;border-radius:10px;padding:10px;margin-bottom:8px}
button{width:100%;padding:8px;border:none;border-radius:8px;background:#38bdf8}
.skin{padding:6px;background:#020617;border-radius:6px;margin-top:4px;cursor:pointer}
.skin.active{background:#22c55e;color:#000}
</style>
</head>

<body>
<div class="app">

<h3 style="text-align:center">â› Mine Game</h3>

<div class="card">
ğŸ‘¤ Player: <span id="playerName"></span><br>
ğŸ’° Coin: <span id="coin">0</span><br>
â­ Level: <span id="level">0</span><br>
âš¡ Power: <span id="power">1</span>
</div>

<div id="pick" class="mine" onclick="mine()">â›</div>

<div class="card">
<button onclick="upgrade()">Upgrade Power (<span id="upCost">10</span>)</button>
</div>

<div class="card">
<h4>ğŸ¯ Quest</h4>
Mine 50 coins  
<button onclick="claimQuest()">Claim (50)</button>
</div>

<div class="card">
<h4>ğŸ¨ Skins</h4>
<div class="skin active" onclick="setSkin('ğŸ‘·',this)">ğŸ‘· Default</div>
<div class="skin" onclick="buySkin('ğŸ¤–',100,this)">ğŸ¤– Robot (100)</div>
<div class="skin" onclick="buySkin('ğŸ§™',300,this)">ğŸ§™ Wizard (300)</div>
</div>

<div class="card">
<h4>â› Pickaxe</h4>
<div class="skin active" onclick="setPick('â›',this)">â› Default</div>
<div class="skin" onclick="buyPick('ğŸ’',200,this)">ğŸ’ Diamond (200)</div>
</div>

<div class="card">
ğŸ“© Ø³Ø§Ø²Ù†Ø¯Ù‡:  
<a href="https://t.me/ImMr_Mmd" target="_blank">@ImMr_Mmd</a><br>
ğŸ“¢ Ú©Ø§Ù†Ø§Ù„:  
<a href="https://t.me/Im_Irooni" target="_blank">@Im_Irooni</a>
</div>

</div>

<script>
/* ================== TELEGRAM ================== */
const tg = window.Telegram.WebApp;
tg.ready(); tg.expand();

/* ================== REGISTER ================== */
const uid = tg.initDataUnsafe?.user?.id || "guest";

let saveKey = "mine_"+uid;

let data = JSON.parse(localStorage.getItem(saveKey)) || {
  name: tg.initDataUnsafe?.user?.first_name || prompt("Ø§Ø³Ù… Ù¾Ù„ÛŒØ±ØŸ"),
  coin:0,
  level:0,
  power:1,
  upCost:10,
  questDone:false,
  skin:"ğŸ‘·",
  pick:"â›",
  skins:["ğŸ‘·"],
  picks:["â›"]
};

/* ================== GAME ================== */
function mine(){
  data.coin += data.power;
  checkLevel();
  save();
}

function upgrade(){
  if(data.coin >= data.upCost){
    data.coin -= data.upCost;
    data.power++;
    data.upCost *= 2;
    save();
  }
}

function checkLevel(){
  let need = (data.level+1)*100;
  if(data.coin >= need){
    data.level++;
    alert("ğŸ‰ Level Up!");
  }
}

/* ================== QUEST ================== */
function claimQuest(){
  if(!data.questDone && data.coin >= 50){
    data.coin += 50;
    data.questDone = true;
    alert("Quest Done!");
    save();
  }
}

/* ================== SKINS ================== */
function buySkin(s,cost,el){
  if(data.coin>=cost && !data.skins.includes(s)){
    data.coin-=cost;
    data.skins.push(s);
    setSkin(s,el);
    save();
  }
}
function setSkin(s,el){
  data.skin=s;
  document.querySelectorAll(".skin").forEach(x=>x.classList.remove("active"));
  el.classList.add("active");
  save();
}

/* ================== PICK ================== */
function buyPick(p,cost,el){
  if(data.coin>=cost && !data.picks.includes(p)){
    data.coin-=cost;
    data.picks.push(p);
    setPick(p,el);
    save();
  }
}
function setPick(p,el){
  data.pick=p;
  document.getElementById("pick").innerText=p;
  el.classList.add("active");
  save();
}

/* ================== SAVE ================== */
function save(){
  localStorage.setItem(saveKey,JSON.stringify(data));
  document.getElementById("coin").innerText=data.coin;
  document.getElementById("level").innerText=data.level;
  document.getElementById("power").innerText=data.power;
  document.getElementById("upCost").innerText=data.upCost;
  document.getElementById("playerName").innerText=data.name;
  document.getElementById("pick").innerText=data.pick;
}
save();
</script>

</body>
</html>
